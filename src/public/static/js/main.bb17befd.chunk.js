(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,a){e.exports=a(200)},119:function(e,t,a){},199:function(e,t,a){},200:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),s=a.n(o),i=(a(119),a(10)),c=a(11),l=a(14),u=a(12),d=a(13),p=a(103),m=a.n(p),h=a(17),f=a(29),E=a(105),g=a(106),b=function(e,t){return void 0===e?{user:{},status:"anonymous"}:"USER_LOGIN"===t.type?{user:t.payload,status:"logged_in"}:"USER_LOGOUT"===t.type?{user:{},status:"anonymous"}:"USER_REJECTED"===t.type?{user:{},status:"rejected"}:e},y=function(e,t){return void 0===e||"NAV_DEFAULT"===t.type?[{to:"/registration",text:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"},{to:"/login",text:"\u0412\u043e\u0439\u0442\u0438"}]:"NAV_ADMIN"===t.type?[{to:"/diet",text:"\u041f\u0438\u0442\u0430\u043d\u0438\u0435"},{to:"/food",text:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432"},{to:"/profile",text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"},{to:"/admin",text:"\u0410\u0434\u043c\u0438\u043d\u043a\u0430"}]:"NAV_USER"===t.type?[{to:"/diet",text:"\u041f\u0438\u0442\u0430\u043d\u0438\u0435"},{to:"/food",text:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432"},{to:"/profile",text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}]:e},v=function(e,t){return void 0===e?{meal:["#","\u041f\u0440\u0438\u0435\u043c \u043f\u0438\u0449\u0438","\u0411\u0435\u043b\u043a\u0438","\u0416\u0438\u0440\u044b","\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b","\u041a\u0430\u043b\u043e\u0440\u0438\u0438","\u0414\u0430\u0442\u0430"],food:["#","\u041f\u0440\u043e\u0434\u0443\u043a\u0442","\u0411\u0435\u043b\u043a\u0438","\u0416\u0438\u0440\u044b","\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b","\u041a\u0430\u043b\u043e\u0440\u0438\u0438","\u041f\u043e\u0440\u0446\u0438\u044f"]}:e},O=a(25),j=function(e,t){return void 0===e||"MEALS_DEFAULT"===t.type?{meals:[],status:"DEFAULT"}:"MEALS_PENDING"===t.type?{meals:e.meals,status:"PENDING"}:"MEALS_RESOLVED"===t.type?{meals:Object(O.a)(t.payload),status:"RESOLVED"}:"MEALS_ERROR"===t.type?{meals:e.meals,status:"ERROR"}:e},D=function(e,t){return void 0===e||"FOODS_DEFAULT"===t.type?{foods:[],status:"DEFAULT"}:"FOODS_PENDING"===t.type?{foods:e.foods,status:"PENDING"}:"FOODS_RESOLVED"===t.type?{foods:Object(O.a)(t.payload),status:"RESOLVED"}:"FOODS_ERROR"===t.type?{foods:e.foods,status:"ERROR"}:e},S=function(e,t){return void 0===e||"CHART_DEFAULT"===t.type?{data:[{}],status:"DEFAULT"}:"CHART_DATA_PENDING"===t.type?{data:e.chart,status:"PENDING"}:"CHART_DATA_RESOLVED"===t.type?{data:Object(O.a)(t.payload),status:"RESOLVED"}:"CHART_DATA_ERROR"===t.type?{data:e.chart,status:"ERROR"}:e},x=a(21),C=function(e,t){return void 0===e||"MODALS_STATUS_DEFAULT"===t.type?{modal:{editMealModal:!1,addMealModal:!1}}:"EDIT_MEAL_MODAL_SHOW"===t.type?{modal:Object(x.a)({},e.modal,{editMealModal:!0})}:"EDIT_MEAL_MODAL_HIDE"===t.type?{modal:Object(x.a)({},e.modal,{editMealModal:!1})}:"ADD_MEAL_MODAL_SHOW"===t.type?{modal:Object(x.a)({},e.modal,{addMealModal:!0})}:"ADD_MEAL_MODAL_HIDE"===t.type?{modal:Object(x.a)({},e.modal,{addMealModal:!1})}:e},w=function(e,t){return void 0===e||"MODALS_DATA_DEFAULT"===t.type?{editModalState:{initData:{food:[{foodId:0,name:"",meal_food:{portion:0}}]}}}:"SET_EDIT_MODAL_STATE"===t.type?{editModalState:Object(x.a)({},e.editModalState,{initData:t.payload})}:e},L=function(e,t){return void 0===e||"FOOD_LIST_DEFAULT"===t.type?{foodList:[],status:"DEFAULT"}:"FOOD_LIST_PENDING"===t.type?{foodList:e.foodList,status:"PENDING"}:"FOOD_LIST_RESOLVED"===t.type?{foodList:Object(O.a)(t.payload),status:"RESOLVED"}:"FOOD_LIST_ERROR"===t.type?{data:e.chart,status:"ERROR"}:e},M=Object(f.combineReducers)({user:b,ui:Object(f.combineReducers)({nav:y,thead:v,modals:Object(f.combineReducers)({status:C,data:w})}),data:Object(f.combineReducers)({meal:j,food:D,chart:S,foodList:L})}),k=localStorage.getItem("reduxState")?JSON.parse(localStorage.getItem("reduxState")):{},T=Object(f.createStore)(M,k,Object(g.composeWithDevTools)(Object(f.applyMiddleware)(E.a)));T.subscribe(function(){localStorage.setItem("reduxState",JSON.stringify(T.getState()))});var A=T,F=a(38),R=a(46),_=a(56),H=a.n(_),N=a(4),I=a.n(N),B=a(9),G=a(5),Y=a(107),U=a(201),V=a(109),P=a(207),W=a(208),J=a(71),z=a.n(J),K=function(){return{type:"NAV_ADMIN"}},$=function(){return{type:"NAV_USER"}},q=function(){return{type:"NAV_DEFAULT"}},Q="".concat("http","://").concat("localhost",":").concat("4000","/"),X=function(e,t){return function(){var a=Object(B.a)(I.a.mark(function a(n){var r;return I.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n({type:"MEALS_PENDING"});case 2:return a.prev=2,a.next=5,fetch("".concat(Q,"meal?rangeFrom=").concat(e,"&rangeTo=").concat(t),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()});case 5:return r=a.sent,a.next=8,n({type:"MEALS_RESOLVED",payload:r});case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(2),a.next=14,n({type:"MEALS_ERROR"});case 14:case"end":return a.stop()}},a,null,[[2,10]])}));return function(e){return a.apply(this,arguments)}}()},Z=function(){return{type:"ADD_MEAL_MODAL_HIDE"}},ee=function(){return{type:"EDIT_MEAL_MODAL_HIDE"}},te=function(e){return{type:"SET_EDIT_MODAL_STATE",payload:e}},ae=function(){return{type:"CHART_DEFAULT"}},ne=function(){return function(){var e=Object(B.a)(I.a.mark(function e(t){var a;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({type:"CHART_DATA_PENDING"});case 2:return e.prev=2,e.next=5,fetch("".concat(Q,"chart"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()});case 5:return a=e.sent,e.next=8,t({type:"CHART_DATA_RESOLVED",payload:a});case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(2),e.next=14,t({type:"CHART_DATA_ERROR"});case 14:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t){return e.apply(this,arguments)}}()},re=function(e,t){return function(){var a=Object(B.a)(I.a.mark(function a(n){var r;return I.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"USER_LOGIN_PENDING"}),a.prev=1,a.next=4,fetch("".concat(Q,"login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:e,password:t})}).then(function(e){return e.json()});case 4:return r=a.sent,a.next=7,n({type:"USER_LOGIN",payload:r});case 7:if("user"!==r.role){a.next=12;break}return a.next=10,n({type:"NAV_USER"});case 10:a.next=14;break;case 12:return a.next=14,n({type:"NAV_ADMIN"});case 14:a.next=19;break;case 16:a.prev=16,a.t0=a.catch(1),n({type:"USER_REJECTED"});case 19:case"end":return a.stop()}},a,null,[[1,16]])}));return function(e){return a.apply(this,arguments)}}()},oe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).logoutHandler=a.logoutHandler.bind(Object(G.a)(Object(G.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"logoutHandler",value:function(){var e=Object(B.a)(I.a.mark(function e(t){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.props.logout();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(U.a,null,r.a.createElement(V.a,null,r.a.createElement(P.a,{bg:"dark",variant:"dark",sticky:"top"},r.a.createElement(W.a,{className:"mr-auto"},this.props.nav.map(function(e,t){return r.a.createElement(Y.LinkContainer,{key:t,exact:!0,to:e.to},r.a.createElement(z.a,null,e.text))}),"logged_in"===this.props.userStatus?r.a.createElement(z.a,{onClick:this.logoutHandler},"\u0412\u044b\u0439\u0442\u0438"):null))))}}]),t}(n.Component),se={setNavAdmin:K,setNavDefault:q,setNavUser:$,logout:function(){return function(){var e=Object(B.a)(I.a.mark(function e(t){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({type:"USER_LOGOUT_PENDING"});case 2:return e.prev=2,e.next=5,fetch("".concat(Q,"logout")).then(function(e){return e.json()});case 5:return e.next=7,t({type:"USER_LOGOUT"});case 7:return e.next=9,t({type:"NAV_DEFAULT"});case 9:return e.next=11,t({type:"MEALS_DEFAULT"});case 11:return e.next=13,t({type:"MODALS_DEFAULT"});case 13:return e.next=15,t({type:"MODALS_DATA_DEFAULT"});case 15:return e.next=17,t({type:"CHART_DEFAULT"});case 17:return e.next=19,localStorage.clear();case 19:e.next=23;break;case 21:e.prev=21,e.t0=e.catch(2);case 23:case"end":return e.stop()}},e,null,[[2,21]])}));return function(t){return e.apply(this,arguments)}}()}},ie=Object(h.b)(function(e){return{userStatus:e.user.status,nav:e.ui.nav}},se)(oe),ce=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"page-container"},r.a.createElement(ie,{history:this.props.history}),r.a.createElement("div",{className:"welcome-page-content"},r.a.createElement("h1",null,"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c! ")))}}]),t}(n.Component),le=a(202),ue=a(206),de=a(203),pe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).loginHandler=a.loginHandler.bind(Object(G.a)(Object(G.a)(a))),a.state={loginError:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loginHandler",value:function(){var e=Object(B.a)(I.a.mark(function e(t){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.props.login(this.login.value,this.password.value);case 3:"logged_in"===this.props.status?this.props.history.push("/diet"):"rejected"===this.props.status&&(this.loginError.classList.add("alert","alert-danger"),this.loginError.innerText="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!");case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(B.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loginError.innerText="",this.loginError.removeAttribute("class");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(le.a,{className:"login-container"},r.a.createElement(ue.a.Group,{as:U.a},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{type:"text",placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",ref:function(t){return e.login=t}}))),r.a.createElement(ue.a.Group,{as:U.a},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",ref:function(t){return e.password=t}}))),r.a.createElement(de.a,{variant:"primary",onClick:this.loginHandler},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement("div",{role:"alert",className:"profile-error",ref:function(t){return e.loginError=t}}))}}]),t}(n.Component),me={login:re},he=Object(h.b)(function(e){return{status:e.user.status}},me)(pe),fe=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ie,{history:this.props.history}),r.a.createElement(he,{history:this.props.history}))}}]),t}(n.Component),Ee=a(205),ge=a(209),be=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleClose=a.handleClose.bind(Object(G.a)(Object(G.a)(a))),a.deleteFoodHandler=a.deleteFoodHandler.bind(Object(G.a)(Object(G.a)(a))),a.setStateToDefault=a.setStateToDefault.bind(Object(G.a)(Object(G.a)(a))),a.getFoodListByCategory=a.getFoodListByCategory.bind(Object(G.a)(Object(G.a)(a))),a.foodCategorySelectHandler=a.foodCategorySelectHandler.bind(Object(G.a)(Object(G.a)(a))),a.addFoodHandler=a.addFoodHandler.bind(Object(G.a)(Object(G.a)(a))),a.handleSave=a.handleSave.bind(Object(G.a)(Object(G.a)(a))),a.state={isError:!1,errorMessage:"",category:[],foodList:[],addedFoodList:a.props.initData.food.map(function(e,t){return e}),selectedFoodItemIndex:0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"setStateToDefault",value:function(){var e=Object(B.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,fetch("".concat(Q,"category")).then(function(e){return e.json()}).then(function(e){return e.map(function(e){return e.category})});case 3:return e.t1=e.sent,e.t2=[],e.t3=this.props.initData.food.map(function(e,t){return{foodId:e.id,name:e.name,portion:e.meal_food.portion}}),e.t4={category:e.t1,foodList:e.t2,addedFoodList:e.t3,selectedFoodItemIndex:0},e.t0.setState.call(e.t0,e.t4),this.getFoodListByCategory(),e.next=11,fetch("".concat(Q,"category")).then(function(e){return e.json()}).then(function(e){return e.map(function(e){return e.category})});case 11:e.sent;case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"foodCategorySelectHandler",value:function(){var e=Object(B.a)(I.a.mark(function e(){var t;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Q,"foods"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:this.foodCategory.value})}).then(function(e){return e.json()});case 2:return t=e.sent,e.next=5,this.setState(Object(x.a)({},this.state,{foodList:t}));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getFoodListByCategory",value:function(){var e=Object(B.a)(I.a.mark(function e(){var t;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Q,"foods"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:this.state.category[0]})}).then(function(e){return e.json()});case 2:return t=e.sent,e.next=5,this.setState(Object(x.a)({},this.state,{foodList:t}));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleClose",value:function(){var e=Object(B.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStateToDefault();case 2:return this.getFoodListByCategory(),e.next=5,this.props.editMealModalHide();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"deleteFoodHandler",value:function(){var e=Object(B.a)(I.a.mark(function e(){var t=this;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({addedFoodList:this.state.addedFoodList.filter(function(e,a){return a!==t.state.selectedFoodItemIndex})});case 2:this.portion.value="";case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addFoodHandler",value:function(){var e=Object(B.a)(I.a.mark(function e(){var t=this;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.state.addedFoodList.filter(function(e,a){return e.foodId===t.state.foodList[t.foodItem.value].id}).length>0?this.setState({isError:!0,errorMessage:"\u0414\u0443\u0431\u043b\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432 \u043d\u0435 \u0434\u043e\u043f\u0443\u0441\u043a\u0430\u044e\u0442\u0441\u044f"}):this.portion.value<0?this.setState({isError:!0,errorMessage:"\u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u043e\u0440\u0446\u0438\u0438 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c"}):this.setState(Object(x.a)({},this.state,{isError:!1,addedFoodList:[].concat(Object(O.a)(this.state.addedFoodList),[{foodId:this.state.foodList[this.foodItem.value].id,name:this.state.foodList[this.foodItem.value].name,portion:this.portion.value}])}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleSave",value:function(){var e=Object(B.a)(I.a.mark(function e(){var t,a;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.initData.id,a=this.props.initData.food.map(function(e,t){return e.id}),e.next=4,fetch("".concat(Q).concat(t),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({meal:{name:this.mealName.value},foods:this.state.addedFoodList.map(function(e,t){return{foodId:e.foodId,portion:e.portion}}),oldFoods:a})}).then(function(e){return e});case 4:return e.next=6,this.props.getMeals();case 6:return e.next=8,this.props.getChartData();case 8:return e.next=10,this.setStateToDefault();case 10:this.props.editMealModalHide();case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=Object(B.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStateToDefault();case 2:return e.next=4,this.getFoodListByCategory();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(Ee.a,{show:this.props.show,onHide:this.handleClose,onShow:this.setStateToDefault},r.a.createElement(Ee.a.Header,{closeButton:!0},r.a.createElement(Ee.a.Title,null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0438\u0435\u043c \u043f\u0438\u0449\u0438")),r.a.createElement(Ee.a.Body,null,!0===this.state.isError?r.a.createElement("div",{role:"alert",className:"alert alert-danger",ref:function(t){return e.editMealError=t}}," ",this.state.errorMessage):null,r.a.createElement(ue.a,null,r.a.createElement(ue.a.Group,null,r.a.createElement(ue.a.Label,null,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0438\u0435\u043c \u043f\u0438\u0449\u0438"),r.a.createElement(ue.a.Control,{type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0438\u0435\u043c\u0430 \u043f\u0438\u0449\u0438",ref:function(t){return e.mealName=t},defaultValue:this.props.initData.name})),r.a.createElement(ue.a.Group,null,r.a.createElement(ue.a.Label,null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432 \u043f\u0438\u0442\u0430\u043d\u0438\u044f"),r.a.createElement(ue.a.Control,{as:"select",ref:function(t){return e.foodCategory=t},onChange:this.foodCategorySelectHandler},this.state.category.map(function(e,t){return r.a.createElement("option",{key:t},e)}))),r.a.createElement(ue.a.Group,null,r.a.createElement(ue.a.Label,null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u043e\u0434\u0443\u043a\u0442 "),r.a.createElement(ue.a.Control,{as:"select",ref:function(t){return e.foodItem=t}},this.state.foodList.map(function(e,t){return r.a.createElement("option",{key:t,value:t},e.name," ")})),r.a.createElement(ue.a.Label,null,"\u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u043e\u0440\u0446\u0438\u0438, \u0433."),r.a.createElement(ue.a.Control,{type:"number",ref:function(t){return e.portion=t}}))),r.a.createElement(ge.a,{defaultActiveKey:"0"},this.state.addedFoodList.map(function(t,a){return r.a.createElement(ge.a.Item,{variant:"success",onClick:function(){e.setState({selectedFoodItemIndex:a})},key:a,action:!0},"".concat(a+1,".  ").concat(t.name," \u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u043e\u0440\u0446\u0438\u0438:").concat(t.portion,"\u0433."))}))),r.a.createElement(Ee.a.Footer,null,r.a.createElement(de.a,{onClick:this.handleClose},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),r.a.createElement(de.a,{onClick:this.addFoodHandler},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),r.a.createElement(de.a,{onClick:this.deleteFoodHandler},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),r.a.createElement(de.a,{onClick:this.handleSave},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))}}]),t}(n.Component),ye={editMealModalHide:ee,getMeals:X,getChartData:ne},ve=Object(h.b)(function(e){return{show:e.ui.modals.status.modal.editMealModal,initData:e.ui.modals.data.editModalState.initData}},ye)(be),Oe=a(24),je=a.n(Oe),De=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleClose=a.handleClose.bind(Object(G.a)(Object(G.a)(a))),a.handleSave=a.handleSave.bind(Object(G.a)(Object(G.a)(a))),a.foodCategorySelectHandler=a.foodCategorySelectHandler.bind(Object(G.a)(Object(G.a)(a))),a.addFoodHandler=a.addFoodHandler.bind(Object(G.a)(Object(G.a)(a))),a.deleteFoodHandler=a.deleteFoodHandler.bind(Object(G.a)(Object(G.a)(a))),a.getFoodListByCategory=a.getFoodListByCategory.bind(Object(G.a)(Object(G.a)(a))),a.setStateToDefault=a.setStateToDefault.bind(Object(G.a)(Object(G.a)(a))),a.state={isError:!1,errorMessage:"",category:[],foodList:[],addedFoodList:[],selectedFoodItemIndex:0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"setStateToDefault",value:function(){var e=Object(B.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,fetch("".concat(Q,"category")).then(function(e){return e.json()}).then(function(e){return e.map(function(e){return e.category})});case 3:e.t1=e.sent,e.t2=[],e.t3=[],e.t4={category:e.t1,foodList:e.t2,addedFoodList:e.t3,selectedFoodItemIndex:0},e.t0.setState.call(e.t0,e.t4);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"deleteFoodHandler",value:function(){var e=Object(B.a)(I.a.mark(function e(){var t=this;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState(Object(x.a)({},this.state,{addedFoodList:this.state.addedFoodList.filter(function(e,a){return a!==t.state.selectedFoodItemIndex})}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getFoodListByCategory",value:function(){var e=Object(B.a)(I.a.mark(function e(){var t;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Q,"foods"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:this.state.category[0]})}).then(function(e){return e.json()});case 2:return t=e.sent,e.next=5,this.setState(Object(x.a)({},this.state,{foodList:t}));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"foodCategorySelectHandler",value:function(){var e=Object(B.a)(I.a.mark(function e(){var t;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Q,"foods"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:this.foodCategory.value})}).then(function(e){return e.json()});case 2:return t=e.sent,e.next=5,this.setState(Object(x.a)({},this.state,{foodList:t}));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addFoodHandler",value:function(){var e=Object(B.a)(I.a.mark(function e(){var t=this;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.state.addedFoodList.filter(function(e,a){return e.foodId===t.state.foodList[t.foodItem.value].id}).length>0?this.setState({isError:!0,errorMessage:"\u0414\u0443\u0431\u043b\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432 \u043d\u0435 \u0434\u043e\u043f\u0443\u0441\u043a\u0430\u044e\u0442\u0441\u044f"}):this.portion.value<0?this.setState({isError:!0,errorMessage:"\u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u043e\u0440\u0446\u0438\u0438 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c"}):this.setState(Object(x.a)({},this.state,{addedFoodList:[].concat(Object(O.a)(this.state.addedFoodList),[{foodId:this.state.foodList[this.foodItem.value].id,name:this.state.foodList[this.foodItem.value].name,portion:this.portion.value}])}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleClose",value:function(){var e=Object(B.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStateToDefault();case 2:return this.getFoodListByCategory(),e.next=5,this.props.addMealModalHide();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleSave",value:function(){var e=Object(B.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Q,"meal"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({meal:{name:this.mealName.value},foods:this.state.addedFoodList.map(function(e,t){return{foodId:e.foodId,portion:e.portion}}),createdAt:""===this.mealCreatedAt.value?je()():this.mealCreatedAt.value})}).then(function(e){return e.json()});case 2:return e.next=4,this.props.getMeals();case 4:return e.next=6,this.props.getChartData();case 6:return e.next=8,this.setStateToDefault();case 8:this.props.addMealModalHide();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=Object(B.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStateToDefault();case 2:return e.next=4,this.getFoodListByCategory();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(Ee.a,{show:this.props.show,onHide:this.handleClose},r.a.createElement(Ee.a.Header,{closeButton:!0},r.a.createElement(Ee.a.Title,null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u0438\u0435\u043c \u043f\u0438\u0449\u0438")),r.a.createElement(Ee.a.Body,null,!0===this.state.isError?r.a.createElement("div",{role:"alert",className:"alert alert-danger",ref:function(t){return e.editMealError=t}}," ",this.state.errorMessage):null,r.a.createElement(ue.a,null,r.a.createElement(ue.a.Group,null,r.a.createElement(ue.a.Label,null,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0438\u0435\u043c \u043f\u0438\u0449\u0438"),r.a.createElement(ue.a.Control,{type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0438\u0435\u043c\u0430 \u043f\u0438\u0449\u0438",ref:function(t){return e.mealName=t}})),r.a.createElement(ue.a.Group,null,r.a.createElement(ue.a.Label,null,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u043f\u0440\u0438\u0435\u043c \u043f\u0438\u0449\u0438"),r.a.createElement(ue.a.Control,{type:"datetime-local",ref:function(t){return e.mealCreatedAt=t}})),r.a.createElement(ue.a.Group,null,r.a.createElement(ue.a.Label,null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432 \u043f\u0438\u0442\u0430\u043d\u0438\u044f"),r.a.createElement(ue.a.Control,{as:"select",ref:function(t){return e.foodCategory=t},onChange:this.foodCategorySelectHandler},this.state.category.map(function(e,t){return r.a.createElement("option",{key:t},e)}))),r.a.createElement(ue.a.Group,null,r.a.createElement(ue.a.Label,null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u043e\u0434\u0443\u043a\u0442 "),r.a.createElement(ue.a.Control,{as:"select",ref:function(t){return e.foodItem=t}},this.state.foodList.map(function(e,t){return r.a.createElement("option",{key:t,value:t},e.name," ")})),r.a.createElement(ue.a.Label,null,"\u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u043e\u0440\u0446\u0438\u0438, \u0433."),r.a.createElement(ue.a.Control,{type:"number",ref:function(t){return e.portion=t}}))),r.a.createElement(ge.a,{defaultActiveKey:"0"},this.state.addedFoodList.map(function(t,a){return r.a.createElement(ge.a.Item,{action:!0,variant:"success",onClick:function(){return e.setState(Object(x.a)({},e.state,{selectedFoodItemIndex:a}))},key:a},"".concat(a+1,".  ").concat(t.name," \u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u043e\u0440\u0446\u0438\u0438:").concat(t.portion,"\u0433."))}))),r.a.createElement(Ee.a.Footer,null,r.a.createElement(de.a,{onClick:this.handleClose},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),r.a.createElement(de.a,{onClick:this.addFoodHandler},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),r.a.createElement(de.a,{onClick:this.deleteFoodHandler},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),r.a.createElement(de.a,{onClick:this.handleSave},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))}}]),t}(n.Component),Se={addMealModalHide:Z,getMeals:X,getChartData:ne},xe=Object(h.b)(function(e){return{show:e.ui.modals.status.modal.addMealModal}},Se)(De),Ce=function(){return{type:"FOODS_DEFAULT"}},we=a(16);function Le(e,t){return e/100*t}function Me(e,t){return e/100*t}function ke(e,t){return e/100*t}var Te,Ae=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e={onRowClick:this.onRowClick},t=this.props.data.map(function(e,t){var a,n;return Object(x.a)({},e,{portion:e.meal_food.portion,index:t+1,protein:Math.round(100*(a=e.protein,n=e.meal_food.portion,Number(a)/100*n))/100,fat:Math.round(100*Me(e.fat,e.meal_food.portion))/100,carbohydrate:Math.round(100*ke(e.carbohydrate,e.meal_food.portion))/100,calories:Math.round(100*Le(e.calories,e.meal_food.portion))/100})});return r.a.createElement(we.BootstrapTable,{data:t,options:e},r.a.createElement(we.TableHeaderColumn,{isKey:!0,dataField:"index",width:"50px",dataAlign:"center"},"\u2116"),r.a.createElement(we.TableHeaderColumn,{dataField:"name",width:"20%",dataAlign:"center"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430"),r.a.createElement(we.TableHeaderColumn,{dataField:"protein",width:"10%",dataAlign:"center"},"\u0411\u0435\u043b\u043a\u0438, \u0433."),r.a.createElement(we.TableHeaderColumn,{dataField:"fat",width:"10%",dataAlign:"center"},"\u0416\u0438\u0440\u044b, \u0433."),r.a.createElement(we.TableHeaderColumn,{dataField:"carbohydrate",width:"10%",dataAlign:"center"},"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433."),r.a.createElement(we.TableHeaderColumn,{dataField:"calories",width:"10%",dataAlign:"center"},"\u041a\u0430\u043b\u043e\u0440\u0438\u0438"),r.a.createElement(we.TableHeaderColumn,{dataField:"portion",width:"10%",dataAlign:"center"},"\u041f\u043e\u0440\u0446\u0438\u044f, \u0433."))}}]),t}(n.Component),Fe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).createCustomSearchField=function(e){return r.a.createElement(we.SearchField,{className:"meal-table-seach-field",placeholder:"\u041f\u043e\u0438\u0441\u043a"})},a.handleRowSelect=a.handleRowSelect.bind(Object(G.a)(Object(G.a)(a))),a.onRowClick=a.onRowClick.bind(Object(G.a)(Object(G.a)(a))),a.onRowDoubleClick=a.onRowDoubleClick.bind(Object(G.a)(Object(G.a)(a))),a.state={expanding:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"expandComponent",value:function(e){return r.a.createElement(Ae,{data:e.food})}},{key:"onRowClick",value:function(e){this.props.initEditMealModal(e)}},{key:"onRowDoubleClick",value:function(e){this.state.expanding.includes(e.index)?this.setState({expanding:[]}):this.setState({expanding:[e.index]})}},{key:"handleRowSelect",value:function(e,t,a){this.props.foodsResolved(e.food)}},{key:"render",value:function(){var e={mode:"radio",bgColor:"#A9E2F3",hideSelectColumn:!0,clickToSelect:!0,clickToExpand:!1,onSelect:this.handleRowSelect},t=this.props.data.map(function(e,t){var a;return Object(x.a)({},e,{proteinReceived:Math.round(100*e.proteinReceived)/100,fatReceived:Math.round(100*e.fatReceived)/100,carbohydrateReceived:Math.round(100*e.carbohydrateReceived)/100,caloriesReceived:Math.round(100*e.caloriesReceived)/100,createdAt:(a=e.createdAt,new Date(a).toLocaleString("ru")),index:t+1})}),a={expandRowBgColor:"#F8E6E0",onRowClick:this.onRowClick,onRowDoubleClick:this.onRowDoubleClick,expanding:this.state.expanding,searchPosition:"left",searchField:this.createCustomSearchField};return r.a.createElement(we.BootstrapTable,{data:t,version:"4",selectRow:e,options:a,expandableRow:function(){return!0},expandComponent:this.expandComponent,hover:!0,condensed:!0,search:!0,multiColumnSearch:!0,pagination:!0},r.a.createElement(we.TableHeaderColumn,{isKey:!0,dataField:"index",width:"5%",dataAlign:"center"},"\u2116"),r.a.createElement(we.TableHeaderColumn,{dataField:"name",width:"150px",dataAlign:"center"},"\u0418\u043c\u044f"),r.a.createElement(we.TableHeaderColumn,{dataField:"proteinReceived",width:"10%",dataAlign:"center"},"\u0411\u0435\u043b\u043a\u0438, \u0433."),r.a.createElement(we.TableHeaderColumn,{dataField:"fatReceived",width:"10%",dataAlign:"center"},"\u0416\u0438\u0440\u044b, \u0433."),r.a.createElement(we.TableHeaderColumn,{dataField:"carbohydrateReceived",width:"10%",dataAlign:"center"},"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433."),r.a.createElement(we.TableHeaderColumn,{dataField:"caloriesReceived",width:"10%",dataAlign:"center"},"\u041a\u0430\u043b\u043e\u0440\u0438\u0438"),r.a.createElement(we.TableHeaderColumn,{dataField:"createdAt",width:"150px",dataAlign:"center"},"\u0414\u0430\u0442\u0430"))}}]),t}(n.Component),Re={foodsDefault:Ce,foodsResolved:function(e){return{type:"FOODS_RESOLVED",payload:e}},initEditMealModal:function(e){return function(){var t=Object(B.a)(I.a.mark(function t(a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(te(e));case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},_e=Object(h.b)(function(e){return{}},Re)(Fe),He=a(204),Ne=(a(199),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).byDayButtonHandler=a.byDayButtonHandler.bind(Object(G.a)(Object(G.a)(a))),a.byWeekButtonHandler=a.byWeekButtonHandler.bind(Object(G.a)(Object(G.a)(a))),a.byMonthButtonHandler=a.byMonthButtonHandler.bind(Object(G.a)(Object(G.a)(a))),a.byAllTimeButtonHandler=a.byAllTimeButtonHandler.bind(Object(G.a)(Object(G.a)(a))),a.getMealsByDate=a.getMealsByDate.bind(Object(G.a)(Object(G.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"byDayButtonHandler",value:function(){this.mealDateFrom.value=je()().startOf("day").format("YYYY-MM-DD"),this.mealDateTo.value=je()().endOf("day").format("YYYY-MM-DD"),this.getMealsByDate()}},{key:"byWeekButtonHandler",value:function(){this.mealDateFrom.value=je()().subtract(7,"day").startOf("day").format("YYYY-MM-DD"),this.mealDateTo.value=je()().endOf("day").format("YYYY-MM-DD"),this.getMealsByDate()}},{key:"byMonthButtonHandler",value:function(){this.mealDateFrom.value=je()().subtract(30,"day").startOf("day").format("YYYY-MM-DD"),this.mealDateTo.value=je()().endOf("day").format("YYYY-MM-DD"),this.getMealsByDate()}},{key:"byAllTimeButtonHandler",value:function(){this.props.getMeals()}},{key:"getMealsByDate",value:function(){var e=this.mealDateFrom.value,t=this.mealDateTo.value;t<e?(this.dateError.classList.add("alert","alert-danger"),this.dateError.innerText="\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u043d \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d!"):(this.dateError.removeAttribute("class"),this.dateError.innerText="",this.props.getMeals(e,t)),this.props.getMeals(e,t)}},{key:"render",value:function(){var e=this;return r.a.createElement(U.a,{className:"meal-date-control-wrapper"},r.a.createElement(ue.a,{className:"meal-date-control-form"},r.a.createElement(ue.a.Group,null,r.a.createElement(ue.a.Label,{style:{paddingRight:"15px"}}," \u041e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c \u0437\u0430:"),r.a.createElement(He.a,null,r.a.createElement(de.a,{size:"sm",variant:"secondary",onClick:this.byDayButtonHandler},"\u0421\u0435\u0433\u043e\u0434\u043d\u044f"),r.a.createElement(de.a,{size:"sm",variant:"secondary",onClick:this.byWeekButtonHandler},"7 \u0434\u043d\u0435\u0439"),r.a.createElement(de.a,{size:"sm",variant:"secondary",onClick:this.byMonthButtonHandler},"30 \u0434\u043d\u0435\u0439"),r.a.createElement(de.a,{size:"sm",variant:"secondary",onClick:this.byAllTimeButtonHandler},"\u0412\u0441\u0435"))),r.a.createElement(ue.a.Group,{className:"range-date-control"},r.a.createElement(ue.a.Label,{style:{paddingRight:"15px"}},"\u041f\u0435\u0440\u0438\u043e\u0434 c "),r.a.createElement(ue.a.Control,{className:"w-25",type:"date",ref:function(t){return e.mealDateFrom=t},defaultValue:je()().format("YYYY-MM-DD"),onChange:this.getMealsByDate}),r.a.createElement(ue.a.Label,{style:{paddingRight:"15px",paddingLeft:"15px"}},"\u043f\u043e"),r.a.createElement(ue.a.Control,{className:"w-25",type:"date",ref:function(t){return e.mealDateTo=t},defaultValue:je()().format("YYYY-MM-DD"),onChange:this.getMealsByDate})),r.a.createElement("div",{role:"alert",ref:function(t){return e.dateError=t}})))}}]),t}(n.Component)),Ie={getMeals:X},Be=Object(h.b)(function(e){return{}},Ie)(Ne),Ge=a(112),Ye=a.n(Ge),Ue=a(113),Ve=a.n(Ue),Pe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={options:{title:{text:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438 \u0438 \u0411\u0416\u0423"},xAxis:[{categories:a.props.chartData.map(function(e){return e.date}).reverse(),crosshair:!0}],yAxis:[{labels:{format:"{value} \u043a\u0430\u043b."},title:{text:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438"}},{labels:{format:"{value} \u0433."},title:{text:"\u0411\u0416\u0423"},opposite:!0}],series:[{name:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438",type:"spline",yAxis:0,data:a.props.chartData.map(function(e){return e.calories}).reverse()},{name:"\u041d\u043e\u0440\u043c\u0430 \u043a\u0430\u043b\u043e\u0440\u0438\u0439",color:"#FF0040",type:"spline",yAxis:0,dashStyle:"shortdot",marker:{enabled:!1},data:a.props.chartData.map(function(e){return e.caloriesNorm})},{name:"\u0411\u0435\u043b\u043a\u0438",color:"#02FB6D",type:"spline",yAxis:1,data:a.props.chartData.map(function(e){return e.protein}).reverse()},{name:"\u0416\u0438\u0440\u044b",color:"#F4F40D",type:"spline",yAxis:1,data:a.props.chartData.map(function(e){return e.fat}).reverse()},{name:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b",color:"#857B7B",type:"spline",yAxis:1,data:a.props.chartData.map(function(e){return e.carbohydrate}).reverse()}]}},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=Object(B.a)(I.a.mark(function e(){var t=this;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Te=setInterval(function(){t.setState({options:{xAxis:{categories:t.props.chartData.map(function(e){return e.date}).reverse()},series:[{data:t.props.chartData.map(function(e){return e.calories}).reverse()},{data:t.props.chartData.map(function(e){return e.caloriesNorm})},{data:t.props.chartData.map(function(e){return e.protein}).reverse()},{data:t.props.chartData.map(function(e){return e.fat}).reverse()},{data:t.props.chartData.map(function(e){return e.carbohydrate}).reverse()}]}})},3e3);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(B.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:clearInterval(Te);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(Ve.a,{highcharts:Ye.a,options:this.state.options})}}]),t}(n.Component),We={getChartData:ne,chartDefault:ae},Je=Object(h.b)(function(e){return{chartData:e.data.chart.data}},We)(Pe),ze=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).timeButtonHandler=a.timeButtonHandler.bind(Object(G.a)(Object(G.a)(a))),a.handleRadio=a.handleRadio.bind(Object(G.a)(Object(G.a)(a))),a.handleDelete=a.handleDelete.bind(Object(G.a)(Object(G.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"timeButtonHandler",value:function(){var e=Object(B.a)(I.a.mark(function e(t){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.dateFrom.value=je()().format("YYYY-MM-DD"),this.dateFrom.disabled=!1;case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var e=Object(B.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Q,"meal/").concat(this.props.currentMeal.id),{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}).then(function(e){return e});case 2:return e.next=4,this.props.getMeals();case 4:this.props.getChartData();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleRadio",value:function(){var e=Object(B.a)(I.a.mark(function e(t){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getMeals(t.target.value);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=Object(B.a)(I.a.mark(function e(){var t,a;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=je()().subtract(14,"day").startOf("day").format("YYYY-MM-DD"),a=je()().endOf("day").format("YYYY-MM-DD"),e.next=4,this.props.getMeals(t,a);case 4:return e.next=6,this.props.getChartData();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(le.a,{fluid:!0,className:"page-container"},r.a.createElement(xe,null),r.a.createElement(ve,null),r.a.createElement(U.a,null,r.a.createElement(V.a,null,r.a.createElement(ie,{history:this.props.history}))),r.a.createElement("div",{className:"diet-page-content-wrapper"},r.a.createElement(U.a,null,r.a.createElement(V.a,{sm:12,lg:12,md:12},r.a.createElement(Be,null))),r.a.createElement(U.a,null,r.a.createElement(V.a,{sm:12,md:12,lg:12,className:"meal-btn-group"},r.a.createElement(de.a,{className:"add-edit-meal-btn",onClick:this.props.addMealModalShow,variant:"success"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c "),r.a.createElement(de.a,{className:"add-edit-meal-btn",onClick:this.props.editMealModalShow,variant:"info"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),r.a.createElement(de.a,{className:"delete-meal-btn",onClick:this.handleDelete,variant:"danger"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c ")),r.a.createElement(V.a,null)),r.a.createElement(U.a,null,r.a.createElement(V.a,null,r.a.createElement(_e,{data:this.props.meals}))),r.a.createElement(U.a,null,r.a.createElement(V.a,null,r.a.createElement(Je,null)))))}}]),t}(n.Component),Ke={getMeals:X,foodsDefault:Ce,editMealModalShow:function(){return{type:"EDIT_MEAL_MODAL_SHOW"}},editMealModalHide:ee,addMealModalShow:function(){return{type:"ADD_MEAL_MODAL_SHOW"}},addMealModalHide:Z,getChartData:ne,chartDefault:ae},$e=Object(h.b)(function(e){return{user:e.user,mealTableHead:e.ui.thead.meal,foodTableHead:e.ui.thead.food,meals:e.data.meal.meals,currentMeal:e.ui.modals.data.editModalState.initData}},Ke)(ze),qe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).validateRegistrationData=a.validateRegistrationData.bind(Object(G.a)(Object(G.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(G.a)(Object(G.a)(a))),a.state={isError:!1,errorMessage:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"validateRegistrationData",value:function(e){var t;e.login.split("").forEach(function(e){t=!(e.charCodeAt()<48||e.charCodeAt()>122)}),!1===t||0===e.login.length?this.setState({isError:!0,errorMessage:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}):e.password.length<6?this.setState({isError:!0,errorMessage:"\u041f\u0430\u0440\u043e\u043b\u044c \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0439"}):e.password!==this.confirmationPassword.value?this.setState({isError:!0,errorMessage:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"}):0===e.age.length||e.age<5||e.age>120?this.setState({isError:!0,errorMessage:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430"}):0===e.weight.length||e.weight<20||e.weight>300?this.setState({isError:!0,errorMessage:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432\u0435\u0441\u0430"}):0===e.height.length||e.height<80||e.height>300?this.setState({isError:!0,errorMessage:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0440\u043e\u0441\u0442\u0430"}):this.setState({isError:!1,errorMessage:""})}},{key:"handleSubmit",value:function(){var e=Object(B.a)(I.a.mark(function e(){var t,a=this;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={login:this.login.value,name:"",surname:"",password:this.password.value,gender:this.gender.value,age:this.age.value,weight:this.weight.value,height:this.height.value,activityLevel:this.activityLevel.value},e.next=3,this.validateRegistrationData(t);case 3:if(!1!==this.state.isError){e.next=7;break}return e.next=6,fetch("".concat(Q,"user"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:this.login.value,name:"",surname:"",password:this.password.value,gender:this.gender.value,age:this.age.value,weight:this.weight.value,height:this.height.value,activityLevel:this.activityLevel.value})}).then(function(e){404===e.status&&a.setState({isError:!0,errorMessage:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"})});case 6:this.state.isError||this.props.history.push("/login");case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(le.a,{fluid:!0,className:"page-container"},r.a.createElement(ie,{history:this.props.history}),r.a.createElement(U.a,{className:"profile-page-form-wrapper"},r.a.createElement(ue.a,{className:"profile-page-form"},r.a.createElement(ue.a.Group,{as:U.a,controlId:"formHorizontalUsername"},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{type:"text",placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b \u0438 \u0446\u0438\u0444\u0440\u044b",ref:function(t){return e.login=t},defaultValue:this.props.login}))),r.a.createElement(ue.a.Group,{as:U.a,controlId:"formHorizontalPassword"},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c, \u043c\u0438\u043d\u0438\u043c\u0443\u043c 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",ref:function(t){return e.password=t}}))),r.a.createElement(ue.a.Group,{as:U.a,controlId:"formHorizontalConfirmationPassword"},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{type:"password",placeholder:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",ref:function(t){return e.confirmationPassword=t}}))),r.a.createElement(ue.a.Group,{as:U.a,controlId:"formHorizontalGender"},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u041f\u043e\u043b:"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{as:"select",ref:function(t){return e.gender=t}},r.a.createElement("option",{value:"male"},"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"),r.a.createElement("option",{value:"female"},"\u0416\u0435\u043d\u0441\u043a\u0438\u0439")))),r.a.createElement(ue.a.Group,{as:U.a,controlId:"formHorizontalAge"},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u0412\u043e\u0437\u0440\u0430\u0441\u0442:"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{type:"number",min:"5",max:"120",ref:function(t){return e.age=t}}))),r.a.createElement(ue.a.Group,{as:U.a,controlId:"formHorizontalWeight"},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u0412\u0435\u0441, \u043a\u0433:"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{type:"number",min:"20",max:"300",ref:function(t){return e.weight=t}}))),r.a.createElement(ue.a.Group,{as:U.a,controlId:"formHorizontalHeight"},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u0420\u043e\u0441\u0442, \u0441\u043c:"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{type:"number",min:"80",max:"300",ref:function(t){return e.height=t}}))),r.a.createElement(ue.a.Group,{as:U.a,controlId:"formHorizontalActivityLevel"},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0444\u0438\u0437. \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438:"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{as:"select",ref:function(t){return e.activityLevel=t}},r.a.createElement("option",{value:"1"},"1 - \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430(\u0441\u0438\u0434\u044f\u0447\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430) "),r.a.createElement("option",{value:"2"},"2 - \u043b\u0435\u0433\u043a\u0438\u0435 \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438 1-3 \u0440\u0430\u0437\u0430 \u0432 \u043d\u0435\u0434\u0435\u043b\u044e "),r.a.createElement("option",{value:"3"},"3 - \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438 4-5 \u0440\u0430\u0437 \u0432 \u043d\u0435\u0434\u0435\u043b\u044e "),r.a.createElement("option",{value:"4"},"4 - \u0438\u043d\u0442\u0435\u043d\u0441\u0438\u0432\u043d\u044b\u0435 \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438 4-5 \u0440\u0430\u0437 \u0432 \u043d\u0435\u0434\u0435\u043b\u044e "),r.a.createElement("option",{value:"5"},"5 - \u0435\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0435 \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438 "),r.a.createElement("option",{value:"6"},"6 - \u0435\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0435 \u0438\u043d\u0442\u0435\u043d\u0441\u0438\u0432\u043d\u044b\u0435 \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438 "),r.a.createElement("option",{value:"7"},"7 - \u0438\u043d\u0442\u0435\u043d\u0441\u0438\u0432\u043d\u044b\u0435 \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438 2 \u0440\u0430\u0437\u0430 \u0432 \u0434\u0435\u043d\u044c ")))),r.a.createElement(de.a,{variant:"primary",onClick:this.handleSubmit}," \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),!0===this.state.isError?r.a.createElement("div",{role:"alert",className:"alert alert-danger profile-error",ref:function(t){return e.loginError=t}}," ",this.state.errorMessage):null,!0===this.state.isSuccess?r.a.createElement("div",{role:"alert",className:"alert alert-success profile-succes",ref:function(t){return e.profileUpdateMessage=t}}," ",this.state.successMessage):null)))}}]),t}(n.Component),Qe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).validateRegistrationData=a.validateRegistrationData.bind(Object(G.a)(Object(G.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(G.a)(Object(G.a)(a))),a.state={isError:!1,errorMessage:"",isSuccess:!1,successMessage:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"validateRegistrationData",value:function(e){var t;e.login.split("").forEach(function(e){t=!(e.charCodeAt()<48||e.charCodeAt()>122)}),!1===t||0===e.login.length?this.setState({isError:!0,errorMessage:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}):e.password.length<6?this.setState({isError:!0,errorMessage:"\u041f\u0430\u0440\u043e\u043b\u044c \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0439"}):e.password!==this.confirmationPassword.value?this.setState({isError:!0,errorMessage:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"}):0===e.age.length||e.age<5||e.age>120?this.setState({isError:!0,errorMessage:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430"}):0===e.weight.length||e.weight<20||e.weight>300?this.setState({isError:!0,errorMessage:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432\u0435\u0441\u0430"}):0===e.height.length||e.height<80||e.height>300?this.setState({isError:!0,errorMessage:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0440\u043e\u0441\u0442\u0430"}):this.setState({isError:!1,errorMessage:""})}},{key:"handleSubmit",value:function(){var e=Object(B.a)(I.a.mark(function e(){var t,a=this;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={login:this.login.value,name:"",surname:"",password:this.password.value,gender:this.gender.value,age:this.age.value,weight:this.weight.value,height:this.height.value,activityLevel:this.activityLevel.value},e.next=3,this.validateRegistrationData(t);case 3:if(!1!==this.state.isError){e.next=11;break}return e.next=6,fetch("".concat(Q,"user/").concat(this.props.user.id),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:this.login.value,name:"",surname:"",password:this.password.value,gender:this.gender.value,age:this.age.value,weight:this.weight.value,height:this.height.value,activityLevel:this.activityLevel.value})}).then(function(e){403===e.status&&a.setState({isError:!0,errorMessage:"\u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d"})});case 6:if(this.state.isError){e.next=11;break}return this.setState({isSuccess:!0,successMessage:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"}),e.next=10,this.props.login(t.login,t.password);case 10:setTimeout(function(){a.setState({isSuccess:!1,successMessage:""})},3e3);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(le.a,{fluid:!0,className:"page-container"},r.a.createElement(ie,{history:this.props.history}),r.a.createElement(U.a,{className:"profile-page-form-wrapper"},r.a.createElement(ue.a,{className:"profile-page-form"},r.a.createElement(ue.a.Group,{as:U.a,className:"profile-page-form-group"},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{plaintext:!0,readOnly:!0,type:"text",ref:function(t){return e.login=t},defaultValue:this.props.user.login}))),r.a.createElement(ue.a.Group,{as:U.a,className:"profile-page-form-group"},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u041f\u0430\u0440\u043e\u043b\u044c:"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c, \u043c\u0438\u043d\u0438\u043c\u0443\u043c 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",ref:function(t){return e.password=t}}))),r.a.createElement(ue.a.Group,{as:U.a,className:"profile-page-form-group"},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f:"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{type:"password",placeholder:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",ref:function(t){return e.confirmationPassword=t}}))),r.a.createElement(ue.a.Group,{as:U.a,className:"profile-page-form-group"},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u041f\u043e\u043b:"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{as:"select",ref:function(t){return e.gender=t},defaultValue:this.props.user.gender},r.a.createElement("option",{value:"male"},"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"),r.a.createElement("option",{value:"female"},"\u0416\u0435\u043d\u0441\u043a\u0438\u0439")))),r.a.createElement(ue.a.Group,{as:U.a,className:"profile-page-form-group"},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u0412\u043e\u0437\u0440\u0430\u0441\u0442:"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{type:"number",min:"5",max:"120",ref:function(t){return e.age=t},defaultValue:this.props.user.age}))),r.a.createElement(ue.a.Group,{as:U.a,className:"profile-page-form-group"},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u0412\u0435\u0441, \u043a\u0433:"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{type:"number",min:"20",max:"300",ref:function(t){return e.weight=t},defaultValue:this.props.user.weight}))),r.a.createElement(ue.a.Group,{as:U.a,className:"profile-page-form-group"},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u0420\u043e\u0441\u0442, \u0441\u043c:"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{type:"number",min:"80",max:"300",ref:function(t){return e.height=t},defaultValue:this.props.user.height}))),r.a.createElement(ue.a.Group,{as:U.a,className:"profile-page-form-group"},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0444\u0438\u0437. \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438:"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{as:"select",ref:function(t){return e.activityLevel=t},defaultValue:this.props.user.activityLevel},r.a.createElement("option",{value:"1"},"1 - \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430(\u0441\u0438\u0434\u044f\u0447\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430) "),r.a.createElement("option",{value:"2"},"2 - \u043b\u0435\u0433\u043a\u0438\u0435 \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438 1-3 \u0440\u0430\u0437\u0430 \u0432 \u043d\u0435\u0434\u0435\u043b\u044e "),r.a.createElement("option",{value:"3"},"3 - \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438 4-5 \u0440\u0430\u0437 \u0432 \u043d\u0435\u0434\u0435\u043b\u044e "),r.a.createElement("option",{value:"4"},"4 - \u0438\u043d\u0442\u0435\u043d\u0441\u0438\u0432\u043d\u044b\u0435 \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438 4-5 \u0440\u0430\u0437 \u0432 \u043d\u0435\u0434\u0435\u043b\u044e "),r.a.createElement("option",{value:"5"},"5 - \u0435\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0435 \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438 "),r.a.createElement("option",{value:"6"},"6 - \u0435\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0435 \u0438\u043d\u0442\u0435\u043d\u0441\u0438\u0432\u043d\u044b\u0435 \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438 "),r.a.createElement("option",{value:"7"},"7 - \u0438\u043d\u0442\u0435\u043d\u0441\u0438\u0432\u043d\u044b\u0435 \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438 2 \u0440\u0430\u0437\u0430 \u0432 \u0434\u0435\u043d\u044c ")))),r.a.createElement(de.a,{variant:"primary",onClick:this.handleSubmit}," \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"),!0===this.state.isError?r.a.createElement("div",{role:"alert",className:"alert alert-danger profile-error",ref:function(t){return e.loginError=t}}," ",this.state.errorMessage):null,!0===this.state.isSuccess?r.a.createElement("div",{role:"alert",className:"alert alert-success profile-success",ref:function(t){return e.profileUpdateMessage=t}}," ",this.state.successMessage):null)))}}]),t}(n.Component),Xe={login:re},Ze=Object(h.b)(function(e){return{user:e.user.user}},Xe)(Qe),et=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).createCustomSearchField=function(e){return r.a.createElement(we.SearchField,{className:"seach-food-list",placeholder:"\u041f\u043e\u0438\u0441\u043a"})},a.handleSortFilterInput=a.handleSortFilterInput.bind(Object(G.a)(Object(G.a)(a))),a.state={foodCategoryList:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=Object(B.a)(I.a.mark(function e(){var t;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getFoodListData();case 2:return e.next=4,fetch("".concat(Q,"category")).then(function(e){return e.json()}).then(function(e){return e.map(function(e){return e.category})});case 4:t=e.sent,this.setState({foodCategoryList:t});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleSortFilterInput",value:function(){var e=Object(B.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getFoodListData(this.category.value,this.foodSort.value);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t={mode:"radio",bgColor:"#A9E2F3",hideSelectColumn:!0,clickToSelect:!0,clickToExpand:!1,onSelect:this.handleRowSelect},a={expandRowBgColor:"#F8E6E0",onRowClick:this.onRowClick,onRowDoubleClick:this.onRowDoubleClick,searchPosition:"left",searchField:this.createCustomSearchField};return r.a.createElement(le.a,{fluid:!0,className:"page-container"},r.a.createElement(ie,{history:this.props.history}),r.a.createElement("div",{className:"food-list-content-wrapper"},r.a.createElement(ue.a,{className:"food-list-form"},r.a.createElement(ue.a.Group,{as:U.a,className:"food-list-form-category"},r.a.createElement(ue.a.Label,{column:!0,sm:3,md:4,lg:4},"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f:"),r.a.createElement(V.a,{sm:9,md:8,lg:8},r.a.createElement(ue.a.Control,{as:"select",ref:function(t){return e.category=t},onChange:this.handleSortFilterInput},r.a.createElement("option",{value:"all"},"\u0412\u0441\u0435 "),this.state.foodCategoryList.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))),r.a.createElement(ue.a.Group,{as:U.a,className:"food-list-form-sort"},r.a.createElement(ue.a.Label,{column:!0,sm:4,md:4,lg:4},"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e:"),r.a.createElement(V.a,{sm:8,md:8,lg:8},r.a.createElement(ue.a.Control,{as:"select",ref:function(t){return e.foodSort=t},onChange:this.handleSortFilterInput},r.a.createElement("option",{value:"name"},"\u0418\u043c\u044f"),r.a.createElement("option",{value:"protein"},"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u0431\u0435\u043b\u043a\u0430 "),r.a.createElement("option",{value:"fat"},"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u0436\u0438\u0440\u043e\u0432 "),r.a.createElement("option",{value:"carbohydrate"},"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u0443\u0433\u043b\u0435\u0432\u043e\u0434\u043e\u0432 "),r.a.createElement("option",{value:"calories"},"\u041a\u0430\u043b\u043e\u0440\u0438\u0439\u043d\u043e\u0441\u0442\u044c"),r.a.createElement("option",{value:"category"},"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f "))))),r.a.createElement(we.BootstrapTable,{data:this.props.foodList,version:"4",selectRow:t,options:a,hover:!0,condensed:!0,search:!0,multiColumnSearch:!0,pagination:!0},r.a.createElement(we.TableHeaderColumn,{isKey:!0,dataField:"name",width:"150px",dataAlign:"center",columnTitle:!0},"\u0418\u043c\u044f"),r.a.createElement(we.TableHeaderColumn,{dataField:"protein",width:"10%",dataAlign:"center"},"\u0411\u0435\u043b\u043a\u0438, \u0433."),r.a.createElement(we.TableHeaderColumn,{dataField:"fat",width:"10%",dataAlign:"center"},"\u0416\u0438\u0440\u044b, \u0433."),r.a.createElement(we.TableHeaderColumn,{dataField:"carbohydrate",width:"10%",dataAlign:"center"},"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433."),r.a.createElement(we.TableHeaderColumn,{dataField:"calories",width:"10%",dataAlign:"center"},"\u041a\u0430\u043b\u043e\u0440\u0438\u0438"),r.a.createElement(we.TableHeaderColumn,{dataField:"category",width:"150px",dataAlign:"center"},"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f")),r.a.createElement("div",{className:"food-list-disclaimer"},r.a.createElement("p",null,"* \u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0430 100\u0433. \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430"))))}}]),t}(n.Component),tt={getFoodListData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name";return function(){var a=Object(B.a)(I.a.mark(function a(n){var r;return I.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n({type:"FOOD_LIST_PENDING"});case 2:return a.prev=2,a.next=5,fetch("".concat(Q,"foods?category=").concat(e,"&sort=").concat(t),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()});case 5:return r=a.sent,a.next=8,n({type:"FOOD_LIST_RESOLVED",payload:r});case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(2),a.next=14,n({type:"FOOD_LIST_ERROR"});case 14:case"end":return a.stop()}},a,null,[[2,10]])}));return function(e){return a.apply(this,arguments)}}()},foodListDefault:function(){return{type:"FOOD_LIST_DEFAULT"}}},at=Object(h.b)(function(e){return{foodList:e.data.foodList.foodList}},tt)(et),nt=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(F.a,{history:this.props.history},r.a.createElement("div",null,r.a.createElement(R.a,{path:"/registration",component:qe,exact:!0}),r.a.createElement(H.a,{path:"/profile",component:Ze,isAuthenticated:"logged_in"===this.props.status,redirect:"/login",exact:!0}),r.a.createElement(R.a,{path:"/login",component:fe,exact:!0}),r.a.createElement(H.a,{path:"/diet",component:$e,exact:!0,isAuthenticated:"logged_in"===this.props.status,redirect:"/login"}),r.a.createElement(H.a,{path:"/food",component:at,isAuthenticated:"logged_in"===this.props.status,redirect:"/login",exact:!0}),r.a.createElement(R.a,{path:"/",component:ce,exact:!0})))}}]),t}(n.Component),rt=Object(h.b)(function(e){return{user:e.user.user,status:e.user.status}})(nt),ot=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{store:A},r.a.createElement(rt,{history:m()()}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(ot,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[114,1,2]]]);
//# sourceMappingURL=main.bb17befd.chunk.js.map